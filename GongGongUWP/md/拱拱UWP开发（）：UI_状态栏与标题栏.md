#拱拱UWP开发（）：UI_状态栏与标题栏

我们在打开应用商店中的App时，会发现有些应用是这样的：
[Edge导航栏]()
[OneNote顶部信息栏]()
[Mail]()
这些应用“自定义”了系统默认的状态栏，从而实现在状态栏显示更多信息。同时，通过设定状态栏透明，我们可以打造更具沉浸感的设计。

##（1）一个简单的实现
UWP中，微软给了我们这个接口用于控制系统状态栏：
```C#

```
这样，我们在隐藏掉系统默认的状态栏后，就可以自己实现一个状态栏。
```XML

```
由于系统状态栏的高度是  ，所以我们自定义的状态栏也设定如此，保持和谐。
[自定义状态栏]（）

##（2）更进一步
当然这样一个简单的面板是不能满足我们的需求的，现在我们在它上面添加一些控件。
```XML

```
这里我们为它加上了一个按钮和一个文本框，但是现在当我们点击按钮时会发现无法点击，这是由于我们没有处理系统状态栏的事件导致系统默认我们的整个自定义状态栏的输入为对状态栏的输入，导致我们的按钮无法接收到输入事件，我们需要这样：
```C#

```

##（3）针对自适应布局进行调整
当我们应用多页面的布局时，我们会发现：原本每页对应的标题栏无法同时接收标题栏事件，就是说，当我们进入副页，此时我们设定副页上的自定义标题栏为系统标题栏：
```C#

```
然而，与此同时，我们会发现，原本在主页的标题栏失去了作用，无论我们如何拖动、双击，都无法实现交互（如拖动移动窗体、双击最大化）。这是由于UWP中一个应用实例只能激活一个标题栏实例，当我们设定新的控件为标题栏时，之前的控件就自动失效。

那么，该怎么做实现我们自适应布局的标题栏呢？

这里我提出一个方法，即设置一个单独控件专门处理标题栏交互部分。当我们处于窄屏时，这个控件自动为标题栏按钮腾出空间，当处于宽屏的双开布局时，其自动延申并在具有按钮的地方自动预留空间。
```XML

```

```C#

```
这里当我们设置Background为Transparent时，将不被绘制在面板上，因此不再接受交互事件，使得其下面的控件得以接收到交互事件。

##（4）实际应用
现在我们将这个自适应标题栏应用到项目中。

为了能够统一进行自适应的布局改变，我们将标题栏及其自适应方法放到UI架构页MainPage。首先来分析我们App的各页面的标题栏结构，由于页数比较多，所以只取一部分：
[Campus_Page]()
[CourseTable_Page]()
[Course_ViewPae]()
[RadioPlay_Page]()

这里我们可以看到，我们需要实现系统标题栏的部分包括：
[需要标题栏系统事件交互区域]()
同时，每个页面需要实现各自的颜色、控件，因此将标题栏的视觉显示部分与用于用户和系统标题栏交互部分分离，将用于处理系统级交互部分放在MainPage,而各页的显示部分仍放在各页面中。
所以在MainPage.xaml中，我们将用于交互的标题栏部分放在顶部的最上层，这样就可以覆盖其他UI控件。
```XML

```
然后是其对应的逻辑部分
```C#

```
在其他各页面中，我们同样将用于显示的标题栏部分置上。
```XML

```
其对应的逻辑部分
```C#

```
这样，我们就构建了整个App的标题栏，效果如下：
[最终效果]()